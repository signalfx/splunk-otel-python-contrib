[
  {
    "traceId": "90a9d9e471e7ba2a1c88f96e2bc46293",
    "spanId": "daaa62fa3f11aae6",
    "parentId": null,
    "serviceName": "healthcare-agent-spcs-no-fix",
    "operationName": "POST /agents/sf-query",
    "tags": {
      "service.version": "v1.0.106-no-fix",
      "http.status_code": 200,
      "span.kind": "server"
    },
    "note": "ROOT SPAN - HTTP request"
  },
  {
    "traceId": "90a9d9e471e7ba2a1c88f96e2bc46293",
    "spanId": "6d7b48054121e9fc",
    "parentId": "daaa62fa3f11aae6",
    "operationName": "invoke_agent healthcare_agent",
    "tags": {
      "gen_ai.operation.name": "invoke_agent",
      "gen_ai.agent.name": "healthcare_agent",
      "gen_ai.framework": "langchain"
    },
    "note": "CORRECT - agent is child of HTTP root"
  },
  {
    "traceId": "90a9d9e471e7ba2a1c88f96e2bc46293",
    "spanId": "b73d110a068e930e",
    "parentId": "daaa62fa3f11aae6",
    "operationName": "step model",
    "tags": {
      "gen_ai.step.type": "chain",
      "gen_ai.step.name": "model",
      "gen_ai.agent.name": "healthcare_agent"
    },
    "note": "BUG! parentId should be 6d7b48054121e9fc (agent), not daaa62fa3f11aae6 (HTTP root)"
  },
  {
    "traceId": "90a9d9e471e7ba2a1c88f96e2bc46293",
    "spanId": "ac8f798541d3812c",
    "parentId": "daaa62fa3f11aae6",
    "operationName": "chat unknown_model",
    "tags": {
      "gen_ai.operation.name": "chat",
      "gen_ai.request.model": "unknown_model",
      "gen_ai.response.model": "claude-3-5-sonnet",
      "gen_ai.usage.input_tokens": 1108,
      "gen_ai.usage.output_tokens": 99
    },
    "note": "BUG! parentId should be b73d110a068e930e (step model), not HTTP root. Also shows Issue #2: request.model is unknown_model"
  },
  {
    "traceId": "90a9d9e471e7ba2a1c88f96e2bc46293",
    "spanId": "7fa31f5192dde5be",
    "parentId": "daaa62fa3f11aae6",
    "operationName": "step tools",
    "tags": {
      "gen_ai.step.type": "chain",
      "gen_ai.step.name": "tools",
      "gen_ai.agent.name": "healthcare_agent"
    },
    "note": "BUG! parentId should be 6d7b48054121e9fc (agent), not HTTP root"
  },
  {
    "traceId": "90a9d9e471e7ba2a1c88f96e2bc46293",
    "spanId": "e4456446b9a33f7c",
    "parentId": "daaa62fa3f11aae6",
    "operationName": "tool query_member_data",
    "tags": {
      "gen_ai.operation.name": "execute_tool",
      "gen_ai.tool.name": "query_member_data",
      "snowflake.cortex_analyst.model_names": "claude-4-sonnet"
    },
    "note": "BUG! parentId should be 7fa31f5192dde5be (step tools), not HTTP root"
  },
  {
    "traceId": "90a9d9e471e7ba2a1c88f96e2bc46293",
    "spanId": "2bc05af97bdb1fe2",
    "parentId": "daaa62fa3f11aae6",
    "operationName": "step model",
    "tags": {
      "gen_ai.step.type": "chain",
      "gen_ai.step.name": "model"
    },
    "note": "BUG! 2nd model step - parentId should be agent, not HTTP root"
  },
  {
    "traceId": "90a9d9e471e7ba2a1c88f96e2bc46293",
    "spanId": "225813e7ed81f752",
    "parentId": "daaa62fa3f11aae6",
    "operationName": "chat unknown_model",
    "tags": {
      "gen_ai.operation.name": "chat",
      "gen_ai.request.model": "unknown_model",
      "gen_ai.response.model": "claude-3-5-sonnet",
      "gen_ai.usage.input_tokens": 1840,
      "gen_ai.usage.output_tokens": 120
    },
    "note": "BUG! 2nd chat - parentId should be step model, not HTTP root. Also shows Issue #2"
  }
]